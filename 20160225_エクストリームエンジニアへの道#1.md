エクストリームエンジニアへの道（Swift編） 2016/02/08
---
# オブジェクト指向
## オブジェクト指向とは
* クラスを使って設計、プログラミング
* あとから差分プログラミングで書くことができるため、コードが短くなり、生産性が上がる

# テスト駆動開発
## テスト駆動開発とは
* XPのプラクティスの一つ
* アジャイル開発の場合にはテスト駆動開発でやるのが普通
  * ソフトウェアの小さな機能ごとにテスト=>実装の細かいステップを繰り返して、プログラムの設計・開発を行う開発手法
  * 進め方
    * ToDoリストで実装すべき機能を管理する
      * メモに作るべき振る舞いや作業をToDoとして洗い出す
    * 各ToDoごとに以下の手順を繰り返す
      * まず、テストコードを書く
      * テスト実行->失敗
      * 次にテストにパスするようにコードを書く
      * テスト実行->成功
      * きれいなコードにする
    * 1サイクルが5~10分ぐらいになるように
      * 小さいのをいくつも積み上げていく
    * テストコードの作成
      * 最後にAssertで比較する

# デザインパターン
## 目的
* 洗練された設計を再利用する
*   

## デザインパターンの作成
* 何度も同じような設計・実装をしてきた

## デザインパターンの古典書
* オブジェクト指向における再利用のためのデザインパターン
* 独習デザインパターン（自著）などくだけたものから

## 分類
### 基本
* GoFのデザインパターン(23コ)

## 生成に関するパターン

## 構造に関するパターン
クラスやオブジェクトを柔軟に合成する方法を提供する

## 振る舞いに関するパターン
オブジェクト間の責任分担を明確にする方法を提供する

### 例：アブストラクトファクトリー（構造）パターン
* ファクトリーでオブジェクトを生成
* 下位オブジェクトとして各要素のファクトリーを生成する

```
  // 初めに各オブジェクトを生成しておけば、以後はオブジェクトの違いを意識する必要がない
  let factory = YenFactory()
  convertMoney = factory.createYenFactory()
```

* ifで分岐させる必要がなくなり、各オブジェクトの部品がファクトリーであ自動的に切り替わって呼び出される
* オープンソースのコードにもよく使われている
* オブジェクト指向のポリモーフィズムを応用したやり方

# リファクタリング
* 外部から見たときの振る舞いを保ちつつ、
  理解や修正が簡単になるようにソフトウェアの内部構造を変化させること
* コードの臭い
  * リファクタリングのきっかけとなる、設計上の問題
* リファクトリングの位置づけ
  * リファクタリングと機能の追加は同時に行わない
  * バージョン管理システムにこまめにコミット
  * 常に自動テストで検証
* 進化的設計

* オブジェクト指向とカプセル化
  * クラスは属性と振る舞いを持っている
  * インターフェースと実装の分離
    * テストを書く = インターフェースを書く

* クラス名とメソッド名は意味のある言葉にする
* ソースが仕様書、読めばわかるというのが理想

# 関数型プログラミング
## 特徴
* 関数
* 高階関数
  引数に値だけでなく、関数を渡すことができる
* クロージャ
* 遅延評価
  呼ばれる直前まで何が値にセットされているか分からない
* 並列処理
* イミュータブル
  いろんなところから呼ばれても大丈夫なように実装する
* ラムダ式
* マイクロサービス

## 制限
* ステートレスでないといけない
